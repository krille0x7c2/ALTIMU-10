   1               		.file	"LPS25H_BAR.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
 104               	.global	write_to_bar_reg
 106               	write_to_bar_reg:
   1:LPS25H_BAR.c  **** /* 
   2:LPS25H_BAR.c  ****  * File:   LPS25H_BAR.c
   3:LPS25H_BAR.c  ****  * Author: krille0x7c2
   4:LPS25H_BAR.c  ****  *
   5:LPS25H_BAR.c  ****  * Created on February 17, 2015, 8:46 AM
   6:LPS25H_BAR.c  ****  */
   7:LPS25H_BAR.c  **** #include <avr/io.h>
   8:LPS25H_BAR.c  **** #include "twi_master.h"
   9:LPS25H_BAR.c  **** #include "LPS25H_BAR.h"
  10:LPS25H_BAR.c  **** #include "altiMU_10.h"
  11:LPS25H_BAR.c  **** 
  12:LPS25H_BAR.c  **** uint8_t write_to_bar_reg(unsigned char address, uint8_t data) {
 108               	.LM0:
 109               	.LFBB1:
 110 0000 CF93      		push r28
 111 0002 DF93      		push r29
 112               	/* prologue: function */
 113               	/* frame size = 0 */
 114               	/* stack size = 2 */
 115               	.L__stack_usage = 2
 116 0004 D82F      		mov r29,r24
 117 0006 C62F      		mov r28,r22
  13:LPS25H_BAR.c  ****     if (i2c_start(BAR_SLAVE_ADDRESS << 1) == 0) {
 119               	.LM1:
 120 0008 8AEB      		ldi r24,lo8(-70)
 121 000a 0E94 0000 		call i2c_start
 122 000e 8111      		cpse r24,__zero_reg__
 123 0010 00C0      		rjmp .L3
  14:LPS25H_BAR.c  ****         i2c_write(address);
 125               	.LM2:
 126 0012 8D2F      		mov r24,r29
 127 0014 0E94 0000 		call i2c_write
  15:LPS25H_BAR.c  ****         i2c_write(data);
 129               	.LM3:
 130 0018 8C2F      		mov r24,r28
 131 001a 0E94 0000 		call i2c_write
  16:LPS25H_BAR.c  **** 
  17:LPS25H_BAR.c  ****         return 1;
 133               	.LM4:
 134 001e 81E0      		ldi r24,lo8(1)
 135 0020 00C0      		rjmp .L2
 136               	.L3:
  18:LPS25H_BAR.c  ****     } else {
  19:LPS25H_BAR.c  ****         return 0;
 138               	.LM5:
 139 0022 80E0      		ldi r24,0
 140               	.L2:
 141               	/* epilogue start */
  20:LPS25H_BAR.c  ****     }
  21:LPS25H_BAR.c  **** }
 143               	.LM6:
 144 0024 DF91      		pop r29
 145 0026 CF91      		pop r28
 146 0028 0895      		ret
 148               	.Lscope1:
 151               	.global	read_from_bar_reg
 153               	read_from_bar_reg:
  22:LPS25H_BAR.c  **** 
  23:LPS25H_BAR.c  **** uint8_t read_from_bar_reg(unsigned char address) {
 155               	.LM7:
 156               	.LFBB2:
 157 002a CF93      		push r28
 158               	/* prologue: function */
 159               	/* frame size = 0 */
 160               	/* stack size = 1 */
 161               	.L__stack_usage = 1
 162 002c C82F      		mov r28,r24
  24:LPS25H_BAR.c  **** 
  25:LPS25H_BAR.c  ****     if (i2c_start(BAR_SLAVE_ADDRESS << 1) == 0) {
 164               	.LM8:
 165 002e 8AEB      		ldi r24,lo8(-70)
 166 0030 0E94 0000 		call i2c_start
 167 0034 8111      		cpse r24,__zero_reg__
 168 0036 00C0      		rjmp .L7
  26:LPS25H_BAR.c  ****         i2c_write(address);
 170               	.LM9:
 171 0038 8C2F      		mov r24,r28
 172 003a 0E94 0000 		call i2c_write
  27:LPS25H_BAR.c  **** 
  28:LPS25H_BAR.c  ****         if (i2c_rep_start(((uint8_t) BAR_SLAVE_ADDRESS << 1) | 1) == 0) {
 174               	.LM10:
 175 003e 8BEB      		ldi r24,lo8(-69)
 176 0040 0E94 0000 		call i2c_rep_start
 177 0044 8111      		cpse r24,__zero_reg__
 178 0046 00C0      		rjmp .L7
 179               	/* epilogue start */
  29:LPS25H_BAR.c  **** 
  30:LPS25H_BAR.c  **** 
  31:LPS25H_BAR.c  ****             return i2c_readNak();
  32:LPS25H_BAR.c  ****         }
  33:LPS25H_BAR.c  ****     }
  34:LPS25H_BAR.c  ****     return 0;
  35:LPS25H_BAR.c  **** }
 181               	.LM11:
 182 0048 CF91      		pop r28
  31:LPS25H_BAR.c  ****         }
 184               	.LM12:
 185 004a 0C94 0000 		jmp i2c_readNak
 186               	.L7:
 188               	.LM13:
 189 004e 80E0      		ldi r24,0
 190               	/* epilogue start */
 191 0050 CF91      		pop r28
 192 0052 0895      		ret
 194               	.Lscope2:
 195               	.global	__floatsisf
 196               	.global	__divsf3
 197               	.global	__addsf3
 199               	.global	read_temp_celsius
 201               	read_temp_celsius:
  36:LPS25H_BAR.c  **** 
  37:LPS25H_BAR.c  **** float read_temp_celsius(void) {
 203               	.LM14:
 204               	.LFBB3:
 205 0054 CF93      		push r28
 206               	/* prologue: function */
 207               	/* frame size = 0 */
 208               	/* stack size = 1 */
 209               	.L__stack_usage = 1
  38:LPS25H_BAR.c  ****     if (i2c_start(BAR_SLAVE_ADDRESS << 1) == 0) {
 211               	.LM15:
 212 0056 8AEB      		ldi r24,lo8(-70)
 213 0058 0E94 0000 		call i2c_start
 214 005c 8111      		cpse r24,__zero_reg__
 215 005e 00C0      		rjmp .L11
  39:LPS25H_BAR.c  ****         i2c_write(BAR_TEMP_OUT_L | (1 << 7));
 217               	.LM16:
 218 0060 8BEA      		ldi r24,lo8(-85)
 219 0062 0E94 0000 		call i2c_write
  40:LPS25H_BAR.c  **** 
  41:LPS25H_BAR.c  ****         if (i2c_rep_start(((uint8_t) BAR_SLAVE_ADDRESS << 1) | 1) == 0) {
 221               	.LM17:
 222 0066 8BEB      		ldi r24,lo8(-69)
 223 0068 0E94 0000 		call i2c_rep_start
 224 006c 8111      		cpse r24,__zero_reg__
 225 006e 00C0      		rjmp .L12
 226               	.LBB2:
  42:LPS25H_BAR.c  ****             uint8_t tl = i2c_readAck();
 228               	.LM18:
 229 0070 0E94 0000 		call i2c_readAck
 230 0074 C82F      		mov r28,r24
  43:LPS25H_BAR.c  ****             uint8_t th = i2c_readNak();
 232               	.LM19:
 233 0076 0E94 0000 		call i2c_readNak
  44:LPS25H_BAR.c  ****             int16_t temp = (int16_t) (th << 8 | tl);
 235               	.LM20:
 236 007a 6C2F      		mov r22,r28
 237 007c 70E0      		ldi r23,0
 238 007e 782B      		or r23,r24
  45:LPS25H_BAR.c  ****             return (45.5 + ((float) temp) / 480); //To Celsius
 240               	.LM21:
 241 0080 8827      		clr r24
 242 0082 77FD      		sbrc r23,7
 243 0084 8095      		com r24
 244 0086 982F      		mov r25,r24
 245 0088 0E94 0000 		call __floatsisf
 246 008c 20E0      		ldi r18,0
 247 008e 30E0      		ldi r19,0
 248 0090 40EF      		ldi r20,lo8(-16)
 249 0092 53E4      		ldi r21,lo8(67)
 250 0094 0E94 0000 		call __divsf3
 251 0098 20E0      		ldi r18,0
 252 009a 30E0      		ldi r19,0
 253 009c 46E3      		ldi r20,lo8(54)
 254 009e 52E4      		ldi r21,lo8(66)
 255 00a0 0E94 0000 		call __addsf3
 256 00a4 00C0      		rjmp .L10
 257               	.L11:
 258               	.LBE2:
  46:LPS25H_BAR.c  ****             
  47:LPS25H_BAR.c  ****         } else {
  48:LPS25H_BAR.c  ****             return 98;
  49:LPS25H_BAR.c  ****         }
  50:LPS25H_BAR.c  **** 
  51:LPS25H_BAR.c  ****     }
  52:LPS25H_BAR.c  ****     return 99;
 260               	.LM22:
 261 00a6 60E0      		ldi r22,0
 262 00a8 70E0      		ldi r23,0
 263 00aa 86EC      		ldi r24,lo8(-58)
 264 00ac 92E4      		ldi r25,lo8(66)
 265 00ae 00C0      		rjmp .L10
 266               	.L12:
  48:LPS25H_BAR.c  ****         }
 268               	.LM23:
 269 00b0 60E0      		ldi r22,0
 270 00b2 70E0      		ldi r23,0
 271 00b4 84EC      		ldi r24,lo8(-60)
 272 00b6 92E4      		ldi r25,lo8(66)
 273               	.L10:
 274               	/* epilogue start */
  53:LPS25H_BAR.c  **** }
 276               	.LM24:
 277 00b8 CF91      		pop r28
 278 00ba 0895      		ret
 283               	.Lscope3:
 284               	.global	__mulsf3
 286               	.global	read_pressure_hpa
 288               	read_pressure_hpa:
  54:LPS25H_BAR.c  **** 
  55:LPS25H_BAR.c  **** float read_pressure_hpa(void) {
 290               	.LM25:
 291               	.LFBB4:
 292 00bc 0F93      		push r16
 293 00be 1F93      		push r17
 294 00c0 CF93      		push r28
 295 00c2 DF93      		push r29
 296               	/* prologue: function */
 297               	/* frame size = 0 */
 298               	/* stack size = 4 */
 299               	.L__stack_usage = 4
  56:LPS25H_BAR.c  ****     if (i2c_start(BAR_SLAVE_ADDRESS << 1) == 0) {
 301               	.LM26:
 302 00c4 8AEB      		ldi r24,lo8(-70)
 303 00c6 0E94 0000 		call i2c_start
 304 00ca 8111      		cpse r24,__zero_reg__
 305 00cc 00C0      		rjmp .L15
  57:LPS25H_BAR.c  ****         i2c_write(BAR_PRESS_POUT_XL | (1 << 7));
 307               	.LM27:
 308 00ce 88EA      		ldi r24,lo8(-88)
 309 00d0 0E94 0000 		call i2c_write
  58:LPS25H_BAR.c  **** 
  59:LPS25H_BAR.c  ****         if (i2c_rep_start(((uint8_t) BAR_SLAVE_ADDRESS << 1) | 1) == 0) {
 311               	.LM28:
 312 00d4 8BEB      		ldi r24,lo8(-69)
 313 00d6 0E94 0000 		call i2c_rep_start
 314 00da 8111      		cpse r24,__zero_reg__
 315 00dc 00C0      		rjmp .L16
 316               	.LBB3:
  60:LPS25H_BAR.c  ****             uint8_t pxl = i2c_readAck();
 318               	.LM29:
 319 00de 0E94 0000 		call i2c_readAck
 320 00e2 D82F      		mov r29,r24
  61:LPS25H_BAR.c  ****             uint8_t pl = i2c_readAck();
 322               	.LM30:
 323 00e4 0E94 0000 		call i2c_readAck
 324 00e8 C82F      		mov r28,r24
  62:LPS25H_BAR.c  ****             uint8_t ph = i2c_readNak();
 326               	.LM31:
 327 00ea 0E94 0000 		call i2c_readNak
  63:LPS25H_BAR.c  ****             int32_t temp = (int32_t) (int8_t) ph << 16 | (uint16_t) pl << 8 | pxl;
 329               	.LM32:
 330 00ee 9927      		clr r25
 331 00f0 87FD      		sbrc r24,7
 332 00f2 9095      		com r25
 333 00f4 A92F      		mov r26,r25
 334 00f6 B92F      		mov r27,r25
 335 00f8 9C01      		movw r18,r24
 336 00fa 1127      		clr r17
 337 00fc 0027      		clr r16
 338 00fe 4C2F      		mov r20,r28
 339 0100 50E0      		ldi r21,0
 340 0102 542F      		mov r21,r20
 341 0104 4427      		clr r20
 342 0106 60E0      		ldi r22,0
 343 0108 70E0      		ldi r23,0
 344 010a D901      		movw r26,r18
 345 010c C801      		movw r24,r16
 346 010e 842B      		or r24,r20
 347 0110 952B      		or r25,r21
 348 0112 A62B      		or r26,r22
 349 0114 B72B      		or r27,r23
 350 0116 BC01      		movw r22,r24
 351 0118 CD01      		movw r24,r26
 352 011a 6D2B      		or r22,r29
  64:LPS25H_BAR.c  ****             return  ((float)temp / 4096);
 354               	.LM33:
 355 011c 0E94 0000 		call __floatsisf
 356 0120 20E0      		ldi r18,0
 357 0122 30E0      		ldi r19,0
 358 0124 40E8      		ldi r20,lo8(-128)
 359 0126 59E3      		ldi r21,lo8(57)
 360 0128 0E94 0000 		call __mulsf3
 361 012c 00C0      		rjmp .L14
 362               	.L15:
 363               	.LBE3:
  65:LPS25H_BAR.c  ****         } else {
  66:LPS25H_BAR.c  ****             return 98;
  67:LPS25H_BAR.c  ****         }
  68:LPS25H_BAR.c  **** 
  69:LPS25H_BAR.c  ****     }
  70:LPS25H_BAR.c  ****     return 99;
 365               	.LM34:
 366 012e 60E0      		ldi r22,0
 367 0130 70E0      		ldi r23,0
 368 0132 86EC      		ldi r24,lo8(-58)
 369 0134 92E4      		ldi r25,lo8(66)
 370 0136 00C0      		rjmp .L14
 371               	.L16:
  66:LPS25H_BAR.c  ****         }
 373               	.LM35:
 374 0138 60E0      		ldi r22,0
 375 013a 70E0      		ldi r23,0
 376 013c 84EC      		ldi r24,lo8(-60)
 377 013e 92E4      		ldi r25,lo8(66)
 378               	.L14:
 379               	/* epilogue start */
  71:LPS25H_BAR.c  **** 
  72:LPS25H_BAR.c  **** }
 381               	.LM36:
 382 0140 DF91      		pop r29
 383 0142 CF91      		pop r28
 384 0144 1F91      		pop r17
 385 0146 0F91      		pop r16
 386 0148 0895      		ret
 393               	.Lscope4:
 395               	.global	init_bar
 397               	init_bar:
  73:LPS25H_BAR.c  **** uint8_t init_bar(void){
 399               	.LM37:
 400               	.LFBB5:
 401               	/* prologue: function */
 402               	/* frame size = 0 */
 403               	/* stack size = 0 */
 404               	.L__stack_usage = 0
  74:LPS25H_BAR.c  ****     write_to_bar_reg(BAR_CTRL_REG1, 0xB0);
 406               	.LM38:
 407 014a 60EB      		ldi r22,lo8(-80)
 408 014c 80E2      		ldi r24,lo8(32)
 409 014e 0E94 0000 		call write_to_bar_reg
  75:LPS25H_BAR.c  ****     i2c_stop();
 411               	.LM39:
 412 0152 0E94 0000 		call i2c_stop
  76:LPS25H_BAR.c  ****     return 1;
  77:LPS25H_BAR.c  **** }
 414               	.LM40:
 415 0156 81E0      		ldi r24,lo8(1)
 416 0158 0895      		ret
 418               	.Lscope5:
 420               	.Letext0:
 421               		.ident	"GCC: (GNU) 4.9.2 20141224 (prerelease)"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 LPS25H_BAR.c
     /tmp/ccAv2aZR.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccAv2aZR.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccAv2aZR.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccAv2aZR.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccAv2aZR.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccAv2aZR.s:106    .text:0000000000000000 write_to_bar_reg
     /tmp/ccAv2aZR.s:153    .text:000000000000002a read_from_bar_reg
     /tmp/ccAv2aZR.s:201    .text:0000000000000054 read_temp_celsius
     /tmp/ccAv2aZR.s:288    .text:00000000000000bc read_pressure_hpa
     /tmp/ccAv2aZR.s:397    .text:000000000000014a init_bar

UNDEFINED SYMBOLS
i2c_start
i2c_write
i2c_rep_start
i2c_readNak
__floatsisf
__divsf3
__addsf3
i2c_readAck
__mulsf3
i2c_stop
