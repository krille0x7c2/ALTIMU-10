   1               		.file	"L3GD20H_GYRO.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
 106               	.global	init_gyro
 108               	init_gyro:
   1:L3GD20H_GYRO.c **** /* 
   2:L3GD20H_GYRO.c ****  * File:   L3GD20H_GYRO.c
   3:L3GD20H_GYRO.c ****  * Author: Christian Bodelsson<bodelsson@gmail.com>
   4:L3GD20H_GYRO.c ****  *
   5:L3GD20H_GYRO.c ****  * Created on February 17, 2015, 8:46 AM
   6:L3GD20H_GYRO.c ****  */
   7:L3GD20H_GYRO.c **** //TODO Write documentation
   8:L3GD20H_GYRO.c **** #include <avr/io.h>
   9:L3GD20H_GYRO.c **** #include "twi_master.h"
  10:L3GD20H_GYRO.c **** #include "L3GD20H_GYRO.h"
  11:L3GD20H_GYRO.c **** #include "ALTIMU_10.h"
  12:L3GD20H_GYRO.c **** /*************************************************************************
  13:L3GD20H_GYRO.c ****  Initiate the gyro more details later.... 
  14:L3GD20H_GYRO.c ****  
  15:L3GD20H_GYRO.c **** *************************************************************************/
  16:L3GD20H_GYRO.c **** 
  17:L3GD20H_GYRO.c **** void init_gyro(void) {
 110               	.LM0:
 111               	.LFBB1:
 112               	/* prologue: function */
 113               	/* frame size = 0 */
 114               	/* stack size = 0 */
 115               	.L__stack_usage = 0
  18:L3GD20H_GYRO.c ****     
  19:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS,GYRO_LOW_ODR, 0x00);
 117               	.LM1:
 118 0000 40E0      		ldi r20,0
 119 0002 69E3      		ldi r22,lo8(57)
 120 0004 8BE6      		ldi r24,lo8(107)
 121 0006 0E94 0000 		call write_to_reg
  20:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS,GYRO_CTRL4, 0x00);
 123               	.LM2:
 124 000a 40E0      		ldi r20,0
 125 000c 63E2      		ldi r22,lo8(35)
 126 000e 8BE6      		ldi r24,lo8(107)
 127 0010 0E94 0000 		call write_to_reg
  21:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS,GYRO_CTRL1, 0x6F);
 129               	.LM3:
 130 0014 4FE6      		ldi r20,lo8(111)
 131 0016 60E2      		ldi r22,lo8(32)
 132 0018 8BE6      		ldi r24,lo8(107)
 133 001a 0C94 0000 		jmp write_to_reg
 135               	.Lscope1:
 137               	.global	read_gyro_values
 139               	read_gyro_values:
  22:L3GD20H_GYRO.c **** }/*init_gyro*/
  23:L3GD20H_GYRO.c **** 
  24:L3GD20H_GYRO.c **** //TODO
  25:L3GD20H_GYRO.c **** /*************************************************************************
  26:L3GD20H_GYRO.c ****  Read the values from all three axis.
  27:L3GD20H_GYRO.c ****  
  28:L3GD20H_GYRO.c ****  Return: valstruct loaded with x:y:z
  29:L3GD20H_GYRO.c ****  
  30:L3GD20H_GYRO.c **** *************************************************************************/
  31:L3GD20H_GYRO.c **** struct valstruct read_gyro_values(void) {
 141               	.LM4:
 142               	.LFBB2:
 143 001e CF93      		push r28
 144 0020 DF93      		push r29
 145               	/* prologue: function */
 146               	/* frame size = 0 */
 147               	/* stack size = 2 */
 148               	.L__stack_usage = 2
  32:L3GD20H_GYRO.c **** 
  33:L3GD20H_GYRO.c ****     Val val;
  34:L3GD20H_GYRO.c ****     if (i2c_start(GYRO_SLAVE_ADDRESS << 1) == 0) {
 150               	.LM5:
 151 0022 86ED      		ldi r24,lo8(-42)
 152 0024 0E94 0000 		call i2c_start
 153 0028 8111      		cpse r24,__zero_reg__
 154 002a 00C0      		rjmp .L3
  35:L3GD20H_GYRO.c ****         i2c_write(GYRO_OUT_X_L | (1 << 7));//Auto increment registers by writing the MSB high
 156               	.LM6:
 157 002c 88EA      		ldi r24,lo8(-88)
 158 002e 0E94 0000 		call i2c_write
  36:L3GD20H_GYRO.c **** 
  37:L3GD20H_GYRO.c ****         if (i2c_rep_start(((uint8_t) GYRO_SLAVE_ADDRESS << 1) | 1) == 0) {
 160               	.LM7:
 161 0032 87ED      		ldi r24,lo8(-41)
 162 0034 0E94 0000 		call i2c_rep_start
 163 0038 8111      		cpse r24,__zero_reg__
 164 003a 00C0      		rjmp .L3
 165               	.LBB2:
  38:L3GD20H_GYRO.c ****             uint8_t xlg = i2c_read(ACK);
 167               	.LM8:
 168 003c 0E94 0000 		call i2c_readAck
 169 0040 D82F      		mov r29,r24
  39:L3GD20H_GYRO.c ****             uint8_t xhg = i2c_read(ACK);
 171               	.LM9:
 172 0042 0E94 0000 		call i2c_readAck
  40:L3GD20H_GYRO.c ****             
  41:L3GD20H_GYRO.c ****             uint8_t ylg = i2c_read(ACK);
 174               	.LM10:
 175 0046 0E94 0000 		call i2c_readAck
 176 004a C82F      		mov r28,r24
  42:L3GD20H_GYRO.c ****             uint8_t yhg = i2c_read(ACK);
 178               	.LM11:
 179 004c 0E94 0000 		call i2c_readAck
  43:L3GD20H_GYRO.c **** 
  44:L3GD20H_GYRO.c ****             uint8_t zhg = i2c_read(ACK);
 181               	.LM12:
 182 0050 0E94 0000 		call i2c_readAck
  45:L3GD20H_GYRO.c ****             uint8_t zlg = i2c_read(NAK);//TODO watch this
 184               	.LM13:
 185 0054 0E94 0000 		call i2c_readNak
  46:L3GD20H_GYRO.c **** 
  47:L3GD20H_GYRO.c **** 
  48:L3GD20H_GYRO.c ****             val.x = (int16_t) (xhg << 8 | xlg);
  49:L3GD20H_GYRO.c ****             val.y = (int16_t) (yhg << 8 | ylg);
  50:L3GD20H_GYRO.c ****             val.z = (int16_t) (zhg << 8 | zlg);
  51:L3GD20H_GYRO.c ****             return val;
 187               	.LM14:
 188 0058 6D2F      		mov r22,r29
 189 005a 7C2F      		mov r23,r28
 190 005c 00C0      		rjmp .L4
 191               	.L3:
 192               	.LBE2:
  52:L3GD20H_GYRO.c ****             
  53:L3GD20H_GYRO.c ****         }
  54:L3GD20H_GYRO.c **** 
  55:L3GD20H_GYRO.c ****     }
  56:L3GD20H_GYRO.c ****     return val;
 194               	.LM15:
 195 005e 60E0      		ldi r22,0
 196 0060 70E0      		ldi r23,0
 197 0062 80E0      		ldi r24,0
 198               	.L4:
 199               	/* epilogue start */
  57:L3GD20H_GYRO.c **** }/*read_gyro_values*/
 201               	.LM16:
 202 0064 DF91      		pop r29
 203 0066 CF91      		pop r28
 204 0068 0895      		ret
 210               	.Lscope2:
 212               	.Letext0:
 213               		.ident	"GCC: (GNU) 4.9.2 20141224 (prerelease)"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 L3GD20H_GYRO.c
     /tmp/ccYeWwey.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccYeWwey.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccYeWwey.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccYeWwey.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccYeWwey.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccYeWwey.s:108    .text:0000000000000000 init_gyro
     /tmp/ccYeWwey.s:139    .text:000000000000001e read_gyro_values

UNDEFINED SYMBOLS
write_to_reg
i2c_start
i2c_write
i2c_rep_start
i2c_readAck
i2c_readNak
