   1               		.file	"L3GD20H_GYRO.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
 108               	.global	init_gyro
 110               	init_gyro:
   1:L3GD20H_GYRO.c **** /* 
   2:L3GD20H_GYRO.c ****  * File:   L3GD20H_GYRO.c
   3:L3GD20H_GYRO.c ****  * Author: Christian Bodelsson<bodelsson@gmail.com>
   4:L3GD20H_GYRO.c ****  *
   5:L3GD20H_GYRO.c ****  * Created on February 17, 2015, 8:46 AM
   6:L3GD20H_GYRO.c ****  */
   7:L3GD20H_GYRO.c **** //TODO Write documentation
   8:L3GD20H_GYRO.c **** #include <avr/io.h>
   9:L3GD20H_GYRO.c **** #include "twi_master.h"
  10:L3GD20H_GYRO.c **** #include "L3GD20H_GYRO.h"
  11:L3GD20H_GYRO.c **** #include "ALTIMU_10.h"
  12:L3GD20H_GYRO.c **** 
  13:L3GD20H_GYRO.c **** /*************************************************************************
  14:L3GD20H_GYRO.c ****  Initiate the gyro
  15:L3GD20H_GYRO.c ****  * GYRO_LOW_ODR: LOW ODR DISABLED
  16:L3GD20H_GYRO.c ****  * GYRO_CTRL4:   +/-250 dps
  17:L3GD20H_GYRO.c ****  * GYRO_CTRL1:   [[DR 01 200Hz ODR],[BW 10 50Hz bandwidth],[PD 1 normal mode],[Zen=Yen=Xen=1 all ax
  18:L3GD20H_GYRO.c ****  
  19:L3GD20H_GYRO.c ****  *************************************************************************/
  20:L3GD20H_GYRO.c **** 
  21:L3GD20H_GYRO.c **** void init_gyro(void) {
 112               	.LM0:
 113               	.LFBB1:
 114               	/* prologue: function */
 115               	/* frame size = 0 */
 116               	/* stack size = 0 */
 117               	.L__stack_usage = 0
  22:L3GD20H_GYRO.c **** 
  23:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS, GYRO_LOW_ODR, 0x00);
 119               	.LM1:
 120 0000 40E0      		ldi r20,0
 121 0002 69E3      		ldi r22,lo8(57)
 122 0004 8BE6      		ldi r24,lo8(107)
 123 0006 0E94 0000 		call write_to_reg
  24:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS, GYRO_CTRL4, 0x00);
 125               	.LM2:
 126 000a 40E0      		ldi r20,0
 127 000c 63E2      		ldi r22,lo8(35)
 128 000e 8BE6      		ldi r24,lo8(107)
 129 0010 0E94 0000 		call write_to_reg
  25:L3GD20H_GYRO.c ****     write_to_reg(GYRO_SLAVE_ADDRESS, GYRO_CTRL1, 0x6F);
 131               	.LM3:
 132 0014 4FE6      		ldi r20,lo8(111)
 133 0016 60E2      		ldi r22,lo8(32)
 134 0018 8BE6      		ldi r24,lo8(107)
 135 001a 0C94 0000 		jmp write_to_reg
 137               	.Lscope1:
 140               	.global	read_gyro_values
 142               	read_gyro_values:
  26:L3GD20H_GYRO.c **** }/*init_gyro*/
  27:L3GD20H_GYRO.c **** 
  28:L3GD20H_GYRO.c **** //TODO
  29:L3GD20H_GYRO.c **** 
  30:L3GD20H_GYRO.c **** /*************************************************************************
  31:L3GD20H_GYRO.c ****  Read the raw values from all three axis. 16-bit resolution
  32:L3GD20H_GYRO.c ****  
  33:L3GD20H_GYRO.c ****  Input: Pointer to data structure, passed by reference.
  34:L3GD20H_GYRO.c ****  
  35:L3GD20H_GYRO.c ****  *************************************************************************/
  36:L3GD20H_GYRO.c **** void read_gyro_values(struct gyro_data *_gyro_data_) {
 144               	.LM4:
 145               	.LFBB2:
 146 001e DF92      		push r13
 147 0020 EF92      		push r14
 148 0022 FF92      		push r15
 149 0024 0F93      		push r16
 150 0026 1F93      		push r17
 151 0028 CF93      		push r28
 152 002a DF93      		push r29
 153               	/* prologue: function */
 154               	/* frame size = 0 */
 155               	/* stack size = 7 */
 156               	.L__stack_usage = 7
 157 002c 8C01      		movw r16,r24
  37:L3GD20H_GYRO.c **** 
  38:L3GD20H_GYRO.c ****     if (i2c_start(GYRO_SLAVE_ADDRESS << 1) == 0) {
 159               	.LM5:
 160 002e 86ED      		ldi r24,lo8(-42)
 161 0030 0E94 0000 		call i2c_start
 162 0034 8111      		cpse r24,__zero_reg__
 163 0036 00C0      		rjmp .L2
  39:L3GD20H_GYRO.c ****         i2c_write(GYRO_OUT_X_L | (1 << 7)); //Auto increment registers by writing the MSB high
 165               	.LM6:
 166 0038 88EA      		ldi r24,lo8(-88)
 167 003a 0E94 0000 		call i2c_write
  40:L3GD20H_GYRO.c **** 
  41:L3GD20H_GYRO.c ****         if (i2c_rep_start(((uint8_t) GYRO_SLAVE_ADDRESS << 1) | 1) == 0) {
 169               	.LM7:
 170 003e 87ED      		ldi r24,lo8(-41)
 171 0040 0E94 0000 		call i2c_rep_start
 172 0044 8111      		cpse r24,__zero_reg__
 173 0046 00C0      		rjmp .L2
 174               	.LBB2:
  42:L3GD20H_GYRO.c ****             uint8_t xlg = i2c_read(ACK);
 176               	.LM8:
 177 0048 0E94 0000 		call i2c_readAck
 178 004c F82E      		mov r15,r24
  43:L3GD20H_GYRO.c ****             uint8_t xhg = i2c_read(ACK);
 180               	.LM9:
 181 004e 0E94 0000 		call i2c_readAck
 182 0052 D82E      		mov r13,r24
  44:L3GD20H_GYRO.c **** 
  45:L3GD20H_GYRO.c ****             uint8_t ylg = i2c_read(ACK);
 184               	.LM10:
 185 0054 0E94 0000 		call i2c_readAck
 186 0058 D82F      		mov r29,r24
  46:L3GD20H_GYRO.c ****             uint8_t yhg = i2c_read(ACK);
 188               	.LM11:
 189 005a 0E94 0000 		call i2c_readAck
 190 005e E82E      		mov r14,r24
  47:L3GD20H_GYRO.c **** 
  48:L3GD20H_GYRO.c ****             uint8_t zlg = i2c_read(ACK);
 192               	.LM12:
 193 0060 0E94 0000 		call i2c_readAck
 194 0064 C82F      		mov r28,r24
  49:L3GD20H_GYRO.c ****             uint8_t zhg = i2c_read(NAK);
 196               	.LM13:
 197 0066 0E94 0000 		call i2c_readNak
  50:L3GD20H_GYRO.c **** 
  51:L3GD20H_GYRO.c ****             _gyro_data_->x = (int16_t) (xhg << 8 | xlg);
 199               	.LM14:
 200 006a 2F2D      		mov r18,r15
 201 006c 30E0      		ldi r19,0
 202 006e 3D29      		or r19,r13
 203 0070 F801      		movw r30,r16
 204 0072 3183      		std Z+1,r19
 205 0074 2083      		st Z,r18
  52:L3GD20H_GYRO.c ****             _gyro_data_->y = (int16_t) (yhg << 8 | ylg);
 207               	.LM15:
 208 0076 2D2F      		mov r18,r29
 209 0078 30E0      		ldi r19,0
 210 007a 3E29      		or r19,r14
 211 007c 3383      		std Z+3,r19
 212 007e 2283      		std Z+2,r18
  53:L3GD20H_GYRO.c ****             _gyro_data_->z = (int16_t) (zhg << 8 | zlg);
 214               	.LM16:
 215 0080 2C2F      		mov r18,r28
 216 0082 30E0      		ldi r19,0
 217 0084 382B      		or r19,r24
 218 0086 3583      		std Z+5,r19
 219 0088 2483      		std Z+4,r18
 220               	.L2:
 221               	/* epilogue start */
 222               	.LBE2:
  54:L3GD20H_GYRO.c **** 
  55:L3GD20H_GYRO.c ****         }
  56:L3GD20H_GYRO.c ****     }
  57:L3GD20H_GYRO.c **** }/*read_gyro_values*/
 224               	.LM17:
 225 008a DF91      		pop r29
 226 008c CF91      		pop r28
 227 008e 1F91      		pop r17
 228 0090 0F91      		pop r16
 229 0092 FF90      		pop r15
 230 0094 EF90      		pop r14
 231 0096 DF90      		pop r13
 232 0098 0895      		ret
 241               	.Lscope2:
 242               	.global	__floatsisf
 243               	.global	__mulsf3
 247               	.global	read_gyro_values_dps
 249               	read_gyro_values_dps:
  58:L3GD20H_GYRO.c **** 
  59:L3GD20H_GYRO.c **** void read_gyro_values_dps(struct gyro_data *_gyro_data_, struct gyro_data_dps *gyro_data_dps) {
 251               	.LM18:
 252               	.LFBB3:
 253 009a 0F93      		push r16
 254 009c 1F93      		push r17
 255 009e CF93      		push r28
 256 00a0 DF93      		push r29
 257               	/* prologue: function */
 258               	/* frame size = 0 */
 259               	/* stack size = 4 */
 260               	.L__stack_usage = 4
 261 00a2 8C01      		movw r16,r24
 262 00a4 EB01      		movw r28,r22
  60:L3GD20H_GYRO.c ****     gyro_data_dps->x=(float)_gyro_data_->x *.00875;
 264               	.LM19:
 265 00a6 FC01      		movw r30,r24
 266 00a8 6081      		ld r22,Z
 267 00aa 7181      		ldd r23,Z+1
 268 00ac 8827      		clr r24
 269 00ae 77FD      		sbrc r23,7
 270 00b0 8095      		com r24
 271 00b2 982F      		mov r25,r24
 272 00b4 0E94 0000 		call __floatsisf
 273 00b8 29E2      		ldi r18,lo8(41)
 274 00ba 3CE5      		ldi r19,lo8(92)
 275 00bc 4FE0      		ldi r20,lo8(15)
 276 00be 5CE3      		ldi r21,lo8(60)
 277 00c0 0E94 0000 		call __mulsf3
 278 00c4 6883      		st Y,r22
 279 00c6 7983      		std Y+1,r23
 280 00c8 8A83      		std Y+2,r24
 281 00ca 9B83      		std Y+3,r25
  61:L3GD20H_GYRO.c ****     gyro_data_dps->y=(float)_gyro_data_->y *.00875;
 283               	.LM20:
 284 00cc F801      		movw r30,r16
 285 00ce 6281      		ldd r22,Z+2
 286 00d0 7381      		ldd r23,Z+3
 287 00d2 8827      		clr r24
 288 00d4 77FD      		sbrc r23,7
 289 00d6 8095      		com r24
 290 00d8 982F      		mov r25,r24
 291 00da 0E94 0000 		call __floatsisf
 292 00de 29E2      		ldi r18,lo8(41)
 293 00e0 3CE5      		ldi r19,lo8(92)
 294 00e2 4FE0      		ldi r20,lo8(15)
 295 00e4 5CE3      		ldi r21,lo8(60)
 296 00e6 0E94 0000 		call __mulsf3
 297 00ea 6C83      		std Y+4,r22
 298 00ec 7D83      		std Y+5,r23
 299 00ee 8E83      		std Y+6,r24
 300 00f0 9F83      		std Y+7,r25
  62:L3GD20H_GYRO.c ****     gyro_data_dps->z=(float)_gyro_data_->z *.00875;
 302               	.LM21:
 303 00f2 F801      		movw r30,r16
 304 00f4 6481      		ldd r22,Z+4
 305 00f6 7581      		ldd r23,Z+5
 306 00f8 8827      		clr r24
 307 00fa 77FD      		sbrc r23,7
 308 00fc 8095      		com r24
 309 00fe 982F      		mov r25,r24
 310 0100 0E94 0000 		call __floatsisf
 311 0104 29E2      		ldi r18,lo8(41)
 312 0106 3CE5      		ldi r19,lo8(92)
 313 0108 4FE0      		ldi r20,lo8(15)
 314 010a 5CE3      		ldi r21,lo8(60)
 315 010c 0E94 0000 		call __mulsf3
 316 0110 6887      		std Y+8,r22
 317 0112 7987      		std Y+9,r23
 318 0114 8A87      		std Y+10,r24
 319 0116 9B87      		std Y+11,r25
 320               	/* epilogue start */
  63:L3GD20H_GYRO.c **** 
  64:L3GD20H_GYRO.c **** }/*read_gyro_values_dps*/
 322               	.LM22:
 323 0118 DF91      		pop r29
 324 011a CF91      		pop r28
 325 011c 1F91      		pop r17
 326 011e 0F91      		pop r16
 327 0120 0895      		ret
 329               	.Lscope3:
 331               	.Letext0:
 332               		.ident	"GCC: (GNU) 4.9.2 20141224 (prerelease)"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 L3GD20H_GYRO.c
     /tmp/cc2vMxLh.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cc2vMxLh.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cc2vMxLh.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cc2vMxLh.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cc2vMxLh.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/cc2vMxLh.s:110    .text:0000000000000000 init_gyro
     /tmp/cc2vMxLh.s:142    .text:000000000000001e read_gyro_values
     /tmp/cc2vMxLh.s:249    .text:000000000000009a read_gyro_values_dps

UNDEFINED SYMBOLS
write_to_reg
i2c_start
i2c_write
i2c_rep_start
i2c_readAck
i2c_readNak
__floatsisf
__mulsf3
